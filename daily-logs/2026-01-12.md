# 2026-01-12 ì‘ì—… ì¼ì§€

## ì‘ì—… ë‚´ìš©

### 1. í•˜íŠ¸ ì´í™íŠ¸ ìœ„ì¹˜ ì¡°ì •
**ë¬¸ì œ:** í•˜íŠ¸ ì´í™íŠ¸ê°€ í™”ë©´ ì¤‘ì•™ì— ìƒì„±ë¨
**í•´ê²°:** ê³ ì–‘ì´ ìœ„ìª½(+1.5f)ì— ìƒì„±ë˜ë„ë¡ ìˆ˜ì •
- [CatInteraction.cs:54](CatInteraction.cs:54): `Vector3.up * 1.5f`ë¡œ ìŠ¤í° ìœ„ì¹˜ ì¡°ì •

### 2. ë°¥ê·¸ë¦‡ ì‹œìŠ¤í…œ êµ¬í˜„ âœ…
**ê¸°ëŠ¥:**
- ë°¥ ì£¼ê¸° ë²„íŠ¼ í´ë¦­ â†’ ë°¥ê·¸ë¦‡ì— 100 ì±„ì›Œì§
- ê³ ì–‘ì´ê°€ ë°°ê³ í”Œ ë•Œ(Hunger > 70) ìë™ìœ¼ë¡œ ë°¥ê·¸ë¦‡ìœ¼ë¡œ ì´ë™
- ë°¥ 5ì”© ë¨¹ì§€ë§Œ ë°°ê³ í””ì€ í•œ ë²ˆì— 0ìœ¼ë¡œ ì´ˆê¸°í™”
- ë°¥ê·¸ë¦‡ Full/Empty ìŠ¤í”„ë¼ì´íŠ¸ ìë™ ì „í™˜

**ì£¼ìš” ì½”ë“œ:**
- [FoodBowlUI.cs](FoodBowlUI.cs): ë°¥ê·¸ë¦‡ UI ê´€ë¦¬, ë°¥ ë¨¹ê¸° ë¡œì§
- [CatHunger.cs](CatHunger.cs): ë°°ê³ í”” ì‹œìŠ¤í…œ, ìë™ ë°¥ ë¨¹ê¸°
- [CatState.cs](CatState.cs): ë°°ê³ í”” ìƒíƒœ ê´€ë¦¬ (`IsHungry` í”„ë¡œí¼í‹°)

### 3. UI ì¢Œí‘œ â†’ ì›”ë“œ ì¢Œí‘œ ë³€í™˜ ë¬¸ì œ í•´ê²° ğŸ”¥
**ë¬¸ì œ:**
- Canvasê°€ Screen Space - Overlay ëª¨ë“œ
- UI ìœ„ì¹˜ë¥¼ ì›”ë“œ ì¢Œí‘œë¡œ ë³€í™˜í•  ë•Œ ì˜ëª»ëœ ì¢Œí‘œ ë°˜í™˜ (261.87 ê°™ì€ ì´ìƒí•œ ê°’)

**ì›ì¸:**
- Screen Space - Overlayì—ì„œëŠ” `RectTransform.position`ì´ ì´ë¯¸ Screen Space ì¢Œí‘œ
- `RectTransformUtility.WorldToScreenPoint()`ë¥¼ ì‚¬ìš©í•˜ë©´ ì•ˆ ë¨

**í•´ê²°:**
```csharp
// FoodBowlUI.cs:51-60
if (canvas != null && canvas.renderMode == RenderMode.ScreenSpaceOverlay)
{
    // Overlay ëª¨ë“œ: positionì´ ë°”ë¡œ Screen Space ì¢Œí‘œ
    screenPos = rectTransform.position;
}
else
{
    // Camera ëª¨ë“œ: WorldToScreenPointë¡œ ë³€í™˜ í•„ìš”
    screenPos = RectTransformUtility.WorldToScreenPoint(_mainCamera, rectTransform.position);
}
```

**í•µì‹¬ ê°œë…:**
- **Screen Space - Overlay**: Canvasê°€ ì¹´ë©”ë¼ì™€ ë…ë¦½ì ìœ¼ë¡œ í™”ë©´ì— ì§ì ‘ ë Œë”ë§
  - `RectTransform.position` = Screen Space ì¢Œí‘œ (í”½ì…€ ë‹¨ìœ„)
  - ì˜ˆ: (300, 450) = í™”ë©´ ì™¼ìª½ í•˜ë‹¨ ê¸°ì¤€ 300px, 450px
- **Screen Space - Camera**: Canvasê°€ ì¹´ë©”ë¼ ì•ì— ë°°ì¹˜
  - `RectTransform.position` â‰  Screen Space
  - `RectTransformUtility.WorldToScreenPoint()` í•„ìš”

### 4. ê³ ì–‘ì´ í´ë¦­ ì´ë™ ì‹œìŠ¤í…œ ğŸ¯
**ë¬¸ì œ:**
- ë°°ê²½/ì°½ë¬¸ í´ë¦­ ì‹œ ê³ ì–‘ì´ ì´ë™ ì•ˆ ë¨
- UI ë²„íŠ¼ í´ë¦­ ì‹œì—ë„ ê³ ì–‘ì´ê°€ ê·¸ ìœ„ì¹˜ë¡œ ì´ë™

**ì›ì¸:**
- Canvasê°€ í™”ë©´ ì „ì²´ë¥¼ ë®ì–´ì„œ ëª¨ë“  í´ë¦­ì´ `IsPointerOverGameObject() = true`
- WindowPanel, ClockPanelì˜ Image ì»´í¬ë„ŒíŠ¸ Raycast Targetì´ ì¼œì ¸ìˆìŒ

**í•´ê²°:**
1. **Raycast Target ê´€ë¦¬:**
   - WindowPanel Image: Raycast Target í•´ì œ
   - ClockPanel Image: Raycast Target í•´ì œ
   - FeedButton: Raycast Target ìœ ì§€ (ë²„íŠ¼ì€ í´ë¦­ ê°ì§€ í•„ìš”)

2. **EventSystem í™œìš©:**
```csharp
// InputHandler.cs:54-58
if (EventSystem.current != null && EventSystem.current.IsPointerOverGameObject())
{
    return; // UI í´ë¦­ ì‹œ ê³ ì–‘ì´ ì´ë™ ì°¨ë‹¨
}
```

**í•µì‹¬ ê°œë…:**
- **Raycast Target**: Image ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš°ìŠ¤ í´ë¦­ì„ ê°ì§€í• ì§€ ì—¬ë¶€
  - ì¼œì§: UIë¡œ ì¸ì‹, `IsPointerOverGameObject() = true`
  - êº¼ì§: í´ë¦­ì´ ê´€í†µ, ë°°ê²½ í´ë¦­ìœ¼ë¡œ ì²˜ë¦¬
- **EventSystem.IsPointerOverGameObject()**: í˜„ì¬ ë§ˆìš°ìŠ¤ ìœ„ì¹˜ì— UIê°€ ìˆëŠ”ì§€ í™•ì¸

### 5. ì°½ë¬¸ ê¸°ì¤€ ì´ë™ ì œí•œ âš ï¸
**ìš”êµ¬ì‚¬í•­:** ì°½ë¬¸ ì•„ë˜ ì˜ì—­ì—ì„œë§Œ ê³ ì–‘ì´ ì´ë™ ê°€ëŠ¥

**êµ¬í˜„:**
```csharp
// InputHandler.cs:154-165
Vector3[] corners = new Vector3[4];
windowRect.GetWorldCorners(corners);
Vector3 bottomScreenPos = corners[0]; // ì™¼ìª½ í•˜ë‹¨

Vector3 worldPos = _mainCamera.ScreenToWorldPoint(
    new Vector3(bottomScreenPos.x, bottomScreenPos.y, 10f)
);
maxY = worldPos.y; // ì°½ë¬¸ í•˜ë‹¨ Y ì¢Œí‘œ

// í´ë¦­í•œ Yê°€ ì°½ë¬¸ ì•„ë˜ë©´ ê·¸ëŒ€ë¡œ, ìœ„ë©´ ì°½ë¬¸ í•˜ë‹¨ìœ¼ë¡œ ì œí•œ
float targetY = Mathf.Min(worldPosition.y, maxY);
```

**í•µì‹¬ ê°œë…:**
- **GetWorldCorners()**: RectTransformì˜ ë„¤ ëª¨ì„œë¦¬ë¥¼ Screen Space ì¢Œí‘œë¡œ ë°˜í™˜
  - `[0]` = ì™¼ìª½ í•˜ë‹¨
  - `[1]` = ì™¼ìª½ ìƒë‹¨
  - `[2]` = ì˜¤ë¥¸ìª½ ìƒë‹¨
  - `[3]` = ì˜¤ë¥¸ìª½ í•˜ë‹¨
- **Mathf.Min()**: í´ë¦­í•œ Yì™€ ì°½ë¬¸ í•˜ë‹¨ Y ì¤‘ ì‘ì€ ê°’(ë” ì•„ë˜) ì„ íƒ
  - Y = -3 (ë°”ë‹¥): -3 < maxY â†’ -3 ì‚¬ìš©
  - Y = 0.5 (ì°½ë¬¸ ìœ„): 0.5 > maxY â†’ maxY ì‚¬ìš©

### 6. ê³ ì–‘ì´ Collider ì œê±°
**ë¬¸ì œ:** ê³ ì–‘ì´ì— CircleCollider2Dê°€ ìˆì–´ì„œ ë°”ë‹¥ í´ë¦­ ì‹œ ê³ ì–‘ì´ í´ë¦­ìœ¼ë¡œ ì¸ì‹ë¨
**í•´ê²°:** Cat GameObjectì˜ CircleCollider2D ì œê±°
- ê³ ì–‘ì´ í´ë¦­ì€ Raycastë¡œ ê°ì§€, ë¬¼ë¦¬ ì¶©ëŒ ë¶ˆí•„ìš”

## í•™ìŠµí•œ Unity ê°œë…

### Canvas Render Mode
1. **Screen Space - Overlay** (í˜„ì¬ ì‚¬ìš© ì¤‘)
   - ì¹´ë©”ë¼ì™€ ë…ë¦½ì 
   - í•­ìƒ í™”ë©´ ìµœìƒë‹¨ì— ë Œë”ë§
   - `RectTransform.position` = Screen Space ì¢Œí‘œ

2. **Screen Space - Camera**
   - ì¹´ë©”ë¼ ì•ì— ë°°ì¹˜
   - ì¹´ë©”ë¼ì™€ í•¨ê»˜ ì›€ì§ì„
   - ì¢Œí‘œ ë³€í™˜ ì‹œ `RectTransformUtility.WorldToScreenPoint()` í•„ìš”

3. **World Space**
   - 3D ê³µê°„ì— ë°°ì¹˜
   - ì¼ë°˜ GameObjectì²˜ëŸ¼ ë™ì‘

### ì¢Œí‘œ ì‹œìŠ¤í…œ
1. **Screen Space**: í™”ë©´ í”½ì…€ ì¢Œí‘œ (0,0 = ì™¼ìª½ í•˜ë‹¨)
2. **World Space**: ê²Œì„ ì›”ë“œ ì¢Œí‘œ (Unity ë‹¨ìœ„, ìŒìˆ˜ ê°€ëŠ¥)
3. **Local Space**: ë¶€ëª¨ ê¸°ì¤€ ìƒëŒ€ ì¢Œí‘œ

### EventSystem
- Unity UIì˜ ì…ë ¥ ê´€ë¦¬ ì‹œìŠ¤í…œ
- `IsPointerOverGameObject()`: ë§ˆìš°ìŠ¤ê°€ UI ìœ„ì— ìˆëŠ”ì§€ í™•ì¸
- Raycast Targetì´ ì¼œì§„ UIë§Œ ê°ì§€

## í•´ê²°í•œ ë²„ê·¸

### ğŸ› ë°¥ê·¸ë¦‡ ì¢Œí‘œ ì˜¤ë¥˜
**ì¦ìƒ:** ê³ ì–‘ì´ê°€ (261.87, -2.5)ë¡œ ì´ë™ (í™”ë©´ ë°–)
**ì›ì¸:** Screen Space - Overlayì—ì„œ ì˜ëª»ëœ ì¢Œí‘œ ë³€í™˜
**í•´ê²°:** Canvas RenderMode ì²´í¬ í›„ ì ì ˆí•œ ë³€í™˜ ë°©ì‹ ì‚¬ìš©

### ğŸ› ë°°ê²½ í´ë¦­ ì•ˆ ë¨
**ì¦ìƒ:** ë²½ì´ë‚˜ ì°½ë¬¸ í´ë¦­ ì‹œ ê³ ì–‘ì´ ì´ë™ ì•ˆ ë¨
**ì›ì¸:** Panel Imageë“¤ì˜ Raycast Targetì´ í™”ë©´ ì „ì²´ë¥¼ ë®ìŒ
**í•´ê²°:** í´ë¦­ ë¶ˆí•„ìš”í•œ UIì˜ Raycast Target í•´ì œ

### ğŸ› ë²„íŠ¼ í´ë¦­ ì‹œ ê³ ì–‘ì´ ì´ë™
**ì¦ìƒ:** ë°¥ ì£¼ê¸° ë²„íŠ¼ í´ë¦­ ì‹œ ë²„íŠ¼ ìœ„ì¹˜ë¡œ ê³ ì–‘ì´ ì´ë™
**ì›ì¸:** EventSystem ì²´í¬ ì—†ì´ ëª¨ë“  í´ë¦­ì„ ì´ë™ìœ¼ë¡œ ì²˜ë¦¬
**í•´ê²°:** `IsPointerOverGameObject()` ì²´í¬ ì¶”ê°€

## ë‹¤ìŒ í•  ì¼

### í•„ìˆ˜
- [ ] í•˜íŠ¸ ì´í™íŠ¸ Prefab ìƒì„± ë° í• ë‹¹
- [ ] ë°°ê³ í”” ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ (TimeManager Time Scale ì¡°ì •)
- [ ] ë°¥ ì—†ì„ ë•Œ ì±„íŒ… UI ë©”ì‹œì§€ í‘œì‹œ

### ê³ ë ¤ì‚¬í•­
- Debug.Log ì •ë¦¬ (ë°°í¬ ì‹œ ì œê±° ë˜ëŠ” ì¡°ê±´ë¶€ ì»´íŒŒì¼)
- GameObject.Find() ìµœì í™” (Startì—ì„œ ìºì‹±)

## ì½”ë“œ ê°œì„  ì‚¬í•­

### í˜„ì¬ êµ¬ì¡°
```
InputHandler (ì…ë ¥ ê°ì§€)
  â””â”€> CatMovement (ì´ë™)
  â””â”€> CatInteraction (í´ë¦­ ë°˜ì‘)

CatHunger (ë°°ê³ í””)
  â””â”€> FoodBowlUI (ë°¥ê·¸ë¦‡)
  â””â”€> CatMovement (ì´ë™)
```

### ì¢‹ì€ ì 
- EventSystemìœ¼ë¡œ UI/World ì…ë ¥ ë¶„ë¦¬
- Canvas RenderModeì— ë”°ë¥¸ ì¡°ê±´ë¶€ ì²˜ë¦¬
- ìë™ ì°¸ì¡° ì°¾ê¸° (FindAnyObjectByType)

### ê°œì„  ê°€ëŠ¥
- `GameObject.Find()` ë§¤ í”„ë ˆì„ í˜¸ì¶œ â†’ ìºì‹± í•„ìš”
- ë””ë²„ê·¸ ë¡œê·¸ ê³¼ë‹¤ â†’ ì¡°ê±´ë¶€ ì»´íŒŒì¼ ê³ ë ¤

## ë©”ëª¨
- Unity 2D ì¢Œí‘œê³„: Yê°€ í´ìˆ˜ë¡ ìœ„ìª½ (ìŒìˆ˜ = ì•„ë˜)
- Screen Space - OverlayëŠ” í•­ìƒ í™”ë©´ í¬ê¸° ê¸°ì¤€
- Raycast Targetì€ ì„±ëŠ¥ì— ì˜í–¥ â†’ í•„ìš”í•œ ê³³ë§Œ í™œì„±í™”
