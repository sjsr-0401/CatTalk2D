# Cat Agent 설계: 학습하고 성장하는 고양이

## 컨셉

**생후 7일 새끼 고양이 → 환경과 주인을 학습하며 성장하는 Agent**

---

## 핵심 메커니즘

### 1. 성장 단계 (Growth Stages)

```
생후 7일 (New Born) → 1개월 (Kitten) → 3개월 (Young) → 6개월+ (Adult)
```

**각 단계별 특징**:
- **어휘력**: 옹알이 → 단어 → 짧은 문장 → 복잡한 대화
- **기억력**: 1~2회 대화 → 최근 10회 → 전체 대화 요약
- **성격**: 기본 템플릿 → 주인과의 상호작용으로 점진적 변화

### 2. 학습 시스템 (Learning System)

#### A. 단기 기억 (Short-term Memory)
- 최근 5~10회 대화 내역
- 오늘의 상호작용 (놀아준 횟수, 먹이 준 시간)
- 현재 감정 상태

#### B. 장기 기억 (Long-term Memory)
```json
{
  "owner_profile": {
    "name": "주인 이름",
    "call_style": "존댓말/반말",
    "interaction_patterns": ["주로 밤에 대화", "아침에 먹이"],
    "topics_of_interest": ["게임", "음악", "요리"],
    "emotional_tone": "친근함/진지함/장난스러움"
  },
  "environment": {
    "home_type": "아파트/주택",
    "toys": ["공", "쥐 인형"],
    "feeding_schedule": ["08:00", "20:00"],
    "favorite_spots": ["창가", "침대 밑"]
  },
  "personality_traits": {
    "playfulness": 85,      // 0~100
    "affection": 70,
    "curiosity": 90,
    "independence": 30,
    "talkativeness": 60
  },
  "learned_behaviors": [
    "주인이 '밥' 말하면 기대함",
    "저녁 9시쯤 졸림",
    "장난감 공을 좋아함"
  ]
}
```

#### C. 경험 기반 학습 (Experience-based Learning)
- **패턴 인식**: 특정 시간대 주인 행동 학습
- **선호도 학습**: 어떤 놀이/먹이를 좋아하는지
- **감정 연결**: "주인이 슬플 때 위로했더니 좋아함" 학습

### 3. Claude API 프롬프트 설계

#### 기본 구조
```
[시스템 프롬프트]
너는 생후 {age}일 된 고양이야.
현재 성장 단계: {stage}
성격: {personality_summary}

[장기 기억 컨텍스트]
주인 프로필: {owner_profile}
학습한 패턴: {learned_behaviors}

[단기 기억]
최근 대화:
{recent_conversations}

오늘 상호작용:
- 놀아준 횟수: {play_count}
- 마지막 식사: {last_fed}
- 현재 기분: {current_mood}

[제약사항]
- 생후 7일: "냥냥" "으아아" 같은 옹알이 위주
- 생후 1개월: 단어 몇 개 사용 가능 ("배고파", "놀자")
- 생후 3개월+: 짧은 문장 사용
- 성격 특성을 대화에 반영 (playfulness가 높으면 장난스럽게)
```

---

## 구현 로드맵

### Phase 1: 기본 Agent (Day 4~5)
- [ ] 고정된 페르소나 (생후 7일 컨셉)
- [ ] Claude API 연동
- [ ] 단기 기억 (최근 5회 대화)
- [ ] 기본 상태 반영 (기분, 친밀도)

### Phase 2: 성장 시스템 (추가 개발)
- [ ] 성장 단계 정의 (NewBorn → Adult)
- [ ] 나이 추적 (실제 시간 경과 or 상호작용 횟수)
- [ ] 단계별 어휘/말투 변화
- [ ] 성장 이벤트 (첫 단어, 첫 문장 등)

### Phase 3: 학습 시스템 (고급)
- [ ] 장기 기억 데이터 구조
- [ ] 주인 프로필 자동 생성
  - 대화 분석 → 주제 추출
  - 시간대별 패턴 학습
  - 감정 톤 분석
- [ ] 환경 학습
  - 놀이/먹이 선호도 추적
  - 일과 패턴 학습
- [ ] 성격 진화
  - 초기: 기본 템플릿 (호기심 많은 새끼)
  - 변화: 상호작용 패턴에 따라 조정

### Phase 4: 고급 Agent 기능 (장기)
- [ ] **임베딩 기반 기억 검색**
  - 유사한 과거 대화 찾기
  - 관련 경험 회상
- [ ] **능동적 행동**
  - 배고프면 먼저 말 걸기
  - 오래 안 놀아주면 삐지기
- [ ] **멀티모달 학습**
  - 주인이 보낸 사진 기억
  - 장난감/환경 이미지 인식

---

## 기술 스택 제안

### 기본 (현재 프로젝트)
- **Claude API**: 대화 생성
- **JSON 로컬 저장**: 상태, 기억, 학습 데이터

### 고급 (선택적)
- **Vector DB** (예: Pinecone, ChromaDB):
  - 대화 임베딩 저장
  - 유사 경험 검색
- **Fine-tuning** (장기적):
  - 고양이 전용 모델 학습
  - 주인별 맞춤형 모델

---

## 예시 시나리오

### 시나리오 1: 생후 7일
```
주인: "안녕 고양이야?"
고양이: "으으... 냥? 🥺" (옹알이만 가능)

주인: "배고프니?"
고양이: "냥냥! 으아아!" (긍정적 반응, 하지만 단어는 못 함)
```

### 시나리오 2: 생후 1개월 (일부 학습 완료)
```
주인: "밥 먹을래?"
고양이: "밥! 냥냥! 조아 🤤" (단어 사용 시작)

[학습된 정보]
- "밥" = 좋아하는 것
- 주인이 자주 "밥 먹을래?" 물어봄
```

### 시나리오 3: 생후 3개월 (성격 형성)
```
주인: "오늘 기분이 안 좋네..."
고양이: "왜 슬퍼? 나랑 놀면 기분 좋아져! 공 던져줘~ 🥺"

[학습된 패턴]
- 주인이 슬플 때 놀이 제안하면 좋아함
- playfulness: 85 (장난스러운 성격으로 발전)
- 주인의 감정에 반응하는 법 학습
```

### 시나리오 4: 생후 6개월 (완전 학습)
```
주인: "야, 또 침대에 토했니?"
고양이: "미안해... 배가 안 좋았어 😿 저번에 준 그 간식... 별로였나봐.
        원래 먹던 거 주면 안 돼? 아, 그리고 9시쯤 되니까 슬슬 졸려..."

[학습된 정보]
- 특정 간식에 안 좋은 반응
- 주인이 저녁 9시쯤 재운다는 패턴 학습
- 복잡한 문장 구사 가능
- 과거 경험(간식) 회상 가능
```

---

## 데이터 구조 예시

### CatMemory.json
```json
{
  "age_in_days": 45,
  "growth_stage": "Kitten",
  "birth_date": "2025-01-01T00:00:00Z",

  "short_term_memory": {
    "recent_conversations": [
      {
        "timestamp": "2025-02-15T14:30:00Z",
        "user": "밥 먹을래?",
        "cat": "밥! 냥냥! 조아 🤤",
        "mood_after": "Happy"
      }
    ],
    "today_interactions": {
      "play_count": 3,
      "fed_times": ["08:00", "20:00"],
      "pet_count": 5
    }
  },

  "long_term_memory": {
    "owner_profile": {
      "detected_name": "지민",
      "interaction_style": "친근함, 반말",
      "active_hours": ["19:00-23:00"],
      "interests": ["게임", "음악"]
    },
    "learned_patterns": [
      {
        "pattern": "저녁 8시쯤 밥 주는 시간",
        "confidence": 0.95,
        "occurrences": 20
      },
      {
        "pattern": "주인이 '게임' 말하면 흥미로워함",
        "confidence": 0.8,
        "occurrences": 8
      }
    ],
    "personality": {
      "playfulness": 85,
      "affection": 70,
      "curiosity": 90,
      "independence": 30,
      "talkativeness": 60
    }
  }
}
```

---

## 구현 우선순위

### ✅ 즉시 가능 (현재 프로젝트에 바로 추가)
1. 생후 7일 컨셉 (고정 페르소나)
2. 단기 기억 (최근 대화 5~10개)
3. 기본 상태 반영 (기분, 친밀도)
4. 성장 단계 추적 (나이 카운트)

### 🔄 중기 목표 (Day 5 이후)
1. 장기 기억 시스템
2. 주인 프로필 학습
3. 성격 진화
4. 패턴 인식

### 🚀 장기 목표 (MVP 이후)
1. 임베딩 기반 기억 검색
2. 능동적 행동
3. 멀티모달 학습

---

## 결론

**이 컨셉은 완전히 가능합니다!**

- **기본 구현**: Day 4~5에 바로 시작 가능
- **학습 시스템**: 점진적으로 추가 가능
- **확장성**: 계속 발전시킬 수 있는 구조

다음 단계에서 이 설계를 roadmap에 통합할까요?
